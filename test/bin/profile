#!/usr/bin/env php
<?php

/*
 * This file is part of the Typhoon package.
 *
 * Copyright Â© 2011 Erin Millard
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

// path constants
require dirname(__DIR__).DIRECTORY_SEPARATOR.'src'.DIRECTORY_SEPARATOR.'paths.php';

// use Composer for autoloading
$autoloader = require LQNT_VENDOR_DIR.DIRECTORY_SEPARATOR.'.composer'.DIRECTORY_SEPARATOR.'autoload.php';

$parser = new Eloquent\Typhax\Parser\Parser;
$iterations = 1000;
$startTime = microtime(true);

for ($i = 0; $i < $iterations; $i ++)
{
  $parser->parse('foo<bar,baz<qux,doom(splat:{pip:[pop,pep]})>>(ping:pang,pong:[1,2,[3,4,5]])');
}

$elapsedTime = microtime(true) - $startTime;
echo 'Parsed '.$iterations.' complex type definitions in '.round($elapsedTime, 3).' seconds.'.PHP_EOL;